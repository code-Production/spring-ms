<!DOCTYPE html>
<html ng-app="app">
<head>
    <title>Index page</title>
    <meta charset="UTF-8">

    <script src="/scripts/angular1.7.0.js"></script>
    <script src="/scripts/angular-cookies1.7.0.js"></script>
    <script src="index.js"></script>
    <link rel="stylesheet" href="/scripts/bootstrap.min.css">
    <link rel="stylesheet" href="/scripts/my.css">
    <style>

    </style>
</head>
<body ng-controller="indexController">
<div class="container ">
    <header class="d-flex flex-wrap flex-row align-items-center justify-content-center justify-content-md-between py-3 mb-4 border-bottom">

        <a href="/" class="d-flex align-items-center col-md-3 mb-2 mb-md-0 text-light text-decoration-none">
            <svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap"><use xlink:href="#bootstrap"/></svg>
        </a>


        <ul class="nav col-12 col-md-auto mb-2 justify-content-center mb-md-0">
            <li><a href="#" class="nav-link px-2 link-secondary">Home</a></li>
            <li><a href="#" class="nav-link px-2 link-dark">Features</a></li>
            <li><a href="#" class="nav-link px-2 link-dark">Pricing</a></li>
            <li><a href="#" class="nav-link px-2 link-dark">FAQs</a></li>
            <li><a href="#" class="nav-link px-2 link-dark">About</a></li>
        </ul>

        <form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3" role="search">
            <input type="search" class="form-control" placeholder="Search..." aria-label="Search">
        </form>

        <div class="col-md-3 text-end">
            <button type="button" class="btn btn-outline-primary me-2" onclick="location.href='/app/login';">Login</button>
            <button type="button" class="btn btn-primary" onclick="location.href='/login2';">Sign-up</button>
        </div>
    </header>
</div>
<main class="d-flex flex-nowrap">
    <div class="d-flex flex-column align-items-end flex-shrink-0 p-3 " style="width: 260px;">

        <div class="p-2">
            <a href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto link-dark text-decoration-none">
                <svg class="bi pe-none me-2" width="40" height="32"><use xlink:href="#bootstrap"/></svg>
                <span class="fs-4"><b>Add product:</b></span>
            </a>
            <hr>
            <ul class="nav nav-pills flex-column">
                <li>
                    <form novalidate ng-submit="addProduct()">
                        <input class="form-control" type="text" placeholder="title"  ng-model="newProduct.title">
                        <p></p>
                        <input class="form-control" type="number" placeholder="price" ng-model="newProduct.price">
                        <p></p>
                        <button class="btn btn-primary" type="submit">Add</button>
                    </form>

                </li>
            </ul>
        </div>
        <div class="p-2">
            <a href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto link-dark text-decoration-none">
                <svg class="bi pe-none me-2" width="40" height="32"><use xlink:href="#bootstrap"/></svg>
                <span class="fs-4"><b>Filter product:</b></span>
            </a>
            <hr>
            <ul class="nav nav-pills flex-column">
                <li>
                    <form novalidate ng-submit="filteredProducts()">
                        <input class="form-control" type="number" placeholder="min price"  ng-model="filter.min_price">
                        <p></p>
                        <input class="form-control" type="number" placeholder="max price" ng-model="filter.max_price">
                        <p></p>
                        <button class="btn btn-primary" type="submit">Filter</button>
                    </form>
                </li>
            </ul>
            <hr>
        </div>
<!--        <div class="mt-auto">-->
<!--            <div class="dropdown">-->
<!--                <a href="#" class="d-flex align-items-center link-dark text-decoration-none dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">-->
<!--                    <img src="https://github.com/mdo.png" alt="" width="32" height="32" class="rounded-circle me-2">-->
<!--                    <strong>mdo</strong>-->
<!--                </a>-->
<!--                <ul class="dropdown-menu text-small shadow">-->
<!--                    <li><a class="dropdown-item" href="#">New project...</a></li>-->
<!--                    <li><a class="dropdown-item" href="#">Settings</a></li>-->
<!--                    <li><a class="dropdown-item" href="#">Profile</a></li>-->
<!--                    <li><hr class="dropdown-divider"></li>-->
<!--                    <li><a class="dropdown-item" href="#">Sign out</a></li>-->
<!--                </ul>-->
<!--            </div>-->
<!--        </div>-->
    </div>

<!--    <div class="b-example-divider b-example-vr"></div>-->

    <div class="container " >
        <h3>Список товаров:</h3>

        <table class="table table-hover ">
            <tr class="bg-light">
                <td><b>Id:</b></td>
                <td><b>Title:</b></td>
                <td><b>Price:</b></td>
                <td><b>Actions:</b></td>
            </tr>
            <tbody>
            <tr ng-repeat="p in ProductList">
                <td>{{p.id}}</td>
                <td>{{p.title}}</td>
                <td>{{p.price}}</td>
                <td>
                    <button class="btn btn-primary" ng-click="addToCart(p.id, 1)">to Cart</button>
                    <button class="btn btn-danger" ng-click="deleteProduct(p.id)">Delete</button>
                </td>
            </tr>
            </tbody>
        </table>

        <table>
            <tr>
                <td><button class="btn btn-primary" ng-click="prevPage()" ng-if="!firstPage">Prev</button></td>
                <td><b>Page: {{pageNumber + 1}}</b></td>
                <td><button class="btn btn-primary" ng-click="nextPage()" ng-if="!lastPage">Next</button></td>
            </tr>
        </table>

        <br>
        <h3>Корзина:</h3>
        <table class="table table-hover">
            <tr class="bg-light">
                <td><b>Id:</b></td>
                <td><b>Title:</b></td>
                <td><b>Price:</b></td>
                <td><b>ProductId:</b></td>
                <td><b>Amount:</b></td>
                <td><b>Sum:</b></td>
                <td><b>Actions:</b></td>
            </tr>
            <tbody>
            <tr ng-repeat="c in CartList.items">
                <td>{{$index + 1}}</td>
                <td>{{c.productDto.title}}</td>
                <td>{{c.productDto.price}}</td>
                <td>{{c.productDto.id}}</td>
                <td>
                    <button class="btn btn-primary" ng-click="deleteFromCart(c.productDto.id, 1)">-</button>
                    {{c.amount}}
                    <button class="btn btn-primary" ng-click="addToCart(c.productDto.id, 1)">+</button>
                </td>
                <td>{{c.sum}}</td>
                <td>
                    <button class="btn btn-danger" ng-click="deleteFromCart(c.productDto.id, null)">Delete</button>
                </td>
            </tr>
            <tr>
                <td></td>
                <td>Итого:</td>
                <td>{{CartList.totalPrice}}</td>
            </tr>
            </tbody>
        </table>
        <button class="btn btn-success" ng-click="saveOrder()">Order</button>
    </div>
</main>
</body>
</html>